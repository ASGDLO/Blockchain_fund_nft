{"version":3,"sources":["../../server/node-web-streams-helper.ts"],"names":["readableStreamTee","pipeTo","pipeThrough","chainStreams","streamFromArray","streamToString","encodeText","decodeText","createTransformStream","createBufferedTransformStream","createFlushEffectStream","renderToStream","createSuffixStream","createPrefixStream","createInlineDataStream","readable","transformStream","TransformStream","transformStream2","writer","writable","getWriter","writer2","reader","getReader","read","then","done","value","close","write","options","resolver","promise","Promise","resolve","process","preventClose","releaseLock","streams","i","length","strings","forEach","str","stream","bufferedString","input","TextEncoder","encode","TextDecoder","decode","flush","transform","source","sink","controller","enqueue","chunk","error","reason","abort","cancel","terminate","desiredSize","maybePromise","err","pendingFlush","flushBuffer","setTimeout","handleFlushEffect","extraChunk","ReactDOMServer","element","suffix","dataStream","generateStaticHTML","flushEffectHandler","closeTag","suffixUnclosed","split","renderStream","renderToReadableStream","allReady","transforms","filter","Boolean","reduce","prefix","prefixFlushed","prefixPrefixFlushFinished","res","dataStreamFinished","dataStreamReader"],"mappings":"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"}