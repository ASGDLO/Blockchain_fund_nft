{"version":3,"file":"react-error-boundary.umd.min.js","sources":["../src/index.js","../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"],"sourcesContent":["import React from 'react'\n\nconst changedArray = (a = [], b = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = {error: null}\nclass ErrorBoundary extends React.Component {\n  static getDerivedStateFromError(error) {\n    return {error}\n  }\n\n  state = initialState\n  updatedWithError = false\n  resetErrorBoundary = (...args) => {\n    this.props.onReset?.(...args)\n    this.reset()\n  }\n\n  reset() {\n    this.updatedWithError = false\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error, info) {\n    this.props.onError?.(error, info)\n  }\n\n  componentDidUpdate(prevProps) {\n    const {error} = this.state\n    const {resetKeys} = this.props\n\n    // There's an edge case where if the thing that triggered the error\n    // happens to *also* be in the resetKeys array, we'd end up resetting\n    // the error boundary immediately. This would likely trigger a second\n    // error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call\n    // of cDU after the error is set\n    if (error !== null && !this.updatedWithError) {\n      this.updatedWithError = true\n      return\n    }\n\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.reset()\n    }\n  }\n\n  render() {\n    const {error} = this.state\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  function Wrapped(props) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}"],"names":["initialState","error","ErrorBoundary","subClass","superClass","state","updatedWithError","resetErrorBoundary","args","props","onReset","reset","prototype","Object","create","constructor","__proto__","getDerivedStateFromError","setState","componentDidCatch","info","onError","componentDidUpdate","prevProps","a","b","this","resetKeys","length","some","item","index","is","onResetKeysChange","render","fallbackRender","FallbackComponent","fallback","React","isValidElement","Error","children","Component","givenError","useState","setError","errorBoundaryProps","Wrapped","name","displayName"],"mappings":"gXAEA,IAGMA,EAAe,CAACC,MAAO,MACvBC,cCNS,IAAwBC,EAAUC,0IDW/CC,MAAQL,IACRM,kBAAmB,IACnBC,mBAAqB,wCAAIC,2BAAAA,0BAClBC,MAAMC,cAAND,OAAMC,gBAAaF,KACnBG,WCfwCP,KAAVD,KAC5BS,UAAYC,OAAOC,OAAOV,EAAWQ,WAC9CT,EAASS,UAAUG,YAAcZ,EACjCA,EAASa,UAAYZ,IDIda,yBAAP,SAAgChB,SACvB,CAACA,MAAAA,+BAUVU,MAAA,gBACOL,kBAAmB,OACnBY,SAASlB,MAGhBmB,kBAAA,SAAkBlB,EAAOmB,4BAClBX,OAAMY,mBAAUpB,EAAOmB,MAG9BE,mBAAA,SAAmBC,WAzBCC,EAAQC,EA0BnBxB,EAASyB,KAAKrB,MAAdJ,MACA0B,EAAaD,KAAKjB,MAAlBkB,UAQO,OAAV1B,GAAmByB,KAAKpB,iBAKd,OAAVL,cAxCcuB,EAwCiBD,EAAUI,aAxC3BH,EAAI,cAAIC,EAwC8BE,KAxC9BF,EAAI,IAChCD,EAAEI,SAAWH,EAAEG,QAAUJ,EAAEK,MAAK,SAACC,EAAMC,UAAWlB,OAAOmB,GAAGF,EAAML,EAAEM,2BAwC3DtB,OAAMwB,6BAAoBV,EAAUI,UAAWA,QAC/ChB,cANAL,kBAAmB,KAU5B4B,OAAA,eACSjC,EAASyB,KAAKrB,MAAdJ,QAC+CyB,KAAKjB,MAApD0B,IAAAA,eAAgBC,IAAAA,kBAAmBC,IAAAA,YAE5B,OAAVpC,EAAgB,KACZQ,EAAQ,CACZR,MAAAA,EACAM,mBAAoBmB,KAAKnB,uBAEvB+B,UAAMC,eAAeF,UAChBA,EACF,GAA8B,mBAAnBF,SACTA,EAAe1B,GACjB,GAAI2B,SACFE,wBAACF,EAAsB3B,SAExB,IAAI+B,MACR,qGAKCd,KAAKjB,MAAMgC,aAhEMH,UAAMI,+CAoFlC,SAAyBC,SACGL,UAAMM,SAAS,MAAlC3C,OAAO4C,UACVF,EAAY,MAAMA,KAClB1C,EAAO,MAAMA,SACV4C,uBApBT,SAA2BH,EAAWI,YAC3BC,EAAQtC,UAEb6B,wBAACpC,EAAkB4C,EACjBR,wBAACI,EAAcjC,QAMfuC,EAAON,EAAUO,aAAeP,EAAUM,MAAQ,iBACxDD,EAAQE,iCAAmCD,MAEpCD"}